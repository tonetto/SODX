-module(mutybis).
-export([start/3, stop/0]).

start(Lock, Sleep, Work) ->
    register(l1, spawn(Lock, init,[1, [l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l2, spawn(Lock, init,[2, [l1,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l3, spawn(Lock, init,[3, [l1,l2,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l4, spawn(Lock, init,[4, [l1,l2,l3,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l5, spawn(Lock, init,[5, [l1,l2,l3,l4,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l6, spawn(Lock, init,[6, [l1,l2,l3,l4,l5,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l7, spawn(Lock, init,[7, [l1,l2,l3,l4,l5,l6,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l8, spawn(Lock, init,[8, [l1,l2,l3,l4,l5,l6,l7,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l9, spawn(Lock, init,[9, [l1,l2,l3,l4,l5,l6,l7,l8,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l10, spawn(Lock, init,[10, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l11,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l11, spawn(Lock, init,[11, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l12,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l12, spawn(Lock, init,[12, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l13,l14,l15,l16,l17,l18,l19,l20]])),
    register(l13, spawn(Lock, init,[13, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l14,l15,l16,l17,l18,l19,l20]])),
    register(l14, spawn(Lock, init,[14, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l15,l16,l17,l18,l19,l20]])),
    register(l15, spawn(Lock, init,[15, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l16,l17,l18,l19,l20]])),
    register(l16, spawn(Lock, init,[16, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l17,l18,l19,l20]])),
    register(l17, spawn(Lock, init,[17, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l18,l19,l20]])),
    register(l18, spawn(Lock, init,[18, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l19,l20]])),
    register(l19, spawn(Lock, init,[19, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l20]])),
    register(l20, spawn(Lock, init,[20, [l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16,l17,l18,l19]])),
    register(john,   spawn(worker, init, ["John", l1,14,Sleep,Work])),
    register(ringo,  spawn(worker, init, ["Ringo", l2,17,Sleep,Work])),
    register(paul,   spawn(worker, init, ["Paul", l3,23,Sleep,Work])),
    register(george, spawn(worker, init, ["George",l4,29,Sleep,Work])),
    register(leo,    spawn(worker, init, ["Leo",l5,39,Sleep,Work])),
    register(peter,  spawn(worker, init, ["Peter", l6,44,Sleep,Work])),
    register(casey,  spawn(worker, init, ["Casey", l7,47,Sleep,Work])),
    register(roshan, spawn(worker, init, ["Roshan", l8,53,Sleep,Work])),
    register(jimmy,  spawn(worker, init, ["Jimmy",l9,59,Sleep,Work])),
    register(jordi,  spawn(worker, init, ["Jordi",l10,69,Sleep,Work])),
    register(alex,   spawn(worker, init, ["Alex", l11,64,Sleep,Work])),
    register(ale,    spawn(worker, init, ["Ale", l12,77,Sleep,Work])),
    register(ernest, spawn(worker, init, ["Ernest", l13,73,Sleep,Work])),
    register(leand,  spawn(worker, init, ["leand",l14,89,Sleep,Work])),
    register(david,  spawn(worker, init, ["David",l15,19,Sleep,Work])),
    register(edm,    spawn(worker, init, ["Edm", l16,94,Sleep,Work])),
    register(roger,  spawn(worker, init, ["Roger", l17,97,Sleep,Work])),
    register(max,    spawn(worker, init, ["Max", l18,63,Sleep,Work])),
    register(luis,   spawn(worker, init, ["Luis",l19,49,Sleep,Work])),
    register(jeff,   spawn(worker, init, ["Jeff",l20,66,Sleep,Work])),
    ok.

stop() ->
    john ! stop,
    ringo ! stop,
    paul ! stop,
    george ! stop,
    leo ! stop,
    peter ! stop,
    casey ! stop,
    roshan ! stop,
    jimmy ! stop,
    jordi ! stop,
    alex ! stop,
    ale ! stop,
    ernest ! stop,
    leand ! stop,
    david ! stop,
    edm ! stop,
    roger ! stop,
    max ! stop,
    luis ! stop,
    jeff ! stop,
    l1 ! stop,
    l2 ! stop,
    l3 ! stop,
    l4 ! stop,
    l5 ! stop,
    l6 ! stop,
    l7 ! stop,
    l8 ! stop,
    l9 ! stop,
    l10 ! stop,
    l11 ! stop,
    l12 ! stop,
    l13 ! stop,
    l14 ! stop,
    l15 ! stop,
    l16 ! stop,
    l17 ! stop,
    l18 ! stop,
    l19 ! stop,
    l20 ! stop.
